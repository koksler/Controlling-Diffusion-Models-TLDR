# Параметры Генерации в диффузионных моделях

CFG Scale это сила следования промпту.

![CFG](/visual/CFG_scale.png)

- **CFG 1.5:** Модель почти игнорирует промпт. Результат непредсказуемый и артефактный. Бутылка выглядит как льдина, но без явных визуальный черт (крышки, текстуры самой бутылки)
- **CFG 3.5:** Результат реалистичный, довольно детализированный, эстетически приятный. Модель следует промпту, но сохраняет "здравый смысл" и генерирует правдоподобный объект
- **CFG 5-6:** Начинается усиление контраста и насыщенности. Изображение становится более "драматичным", тени - глубже, свет - ярче. Детализация все еще высокая, но изображение начинает терять естественность
- **CFG 12:** Изображение становится выжженным. Цвета неестественно яркие, свет превращается в свечение. Модель так сильно пытается следовать промпту, что усиливает все эффекты до максимума.
- **CFG 100:** Сохраняется только мнимый силуэт, модель ломается.

![steps](/visual/Steps_scale.png)

- **10 шагов:** Результат сырой, размытый, "недоделанный". Основная форма есть, но не хватает четкости и деталей
- **20 шагов:** Изображение становится значительно четче, появляются детали (пена, текстура стола).
- **30 шагов:** Изображение практически готово. Отличия от 20 шагов заметны, но уже не такие сильные. Картинка более четкая, цвета более нейтральные.
- **60 шагов:** Модель начала галлюцинировать неестетсвенные детали. "Растёкся" поддон бутылки, а тёмные части текстуры дерева проинтерпретировались как отдельные объекты, лежащие на столе.
- **100 шагов:** Модель начинает **"переобучаться" под конкретный промпт** прямо в процессе генерации, что приводит к более буквальному результату, как у Эйлера.
- **400 шагов:** Результат крайне похож на результат на планировщике normal. Из этого можно вывести, что при достаточном количестве итераций различные численные методы сходятся к общему аттрактору в латентном пространстве, который представляет собой математически оптимальное решение для заданных начальных условий (промпт, seed, модель)

При этом, на более стандартных шагах (С 20 по 30) разница минимальная. Это описывает закон убывающей отдачи.

> ### Закон убывающей отдачи
> Это принцип, утверждающий, что при увеличении одного фактора, при прочих равных условиях, эффект от этого увеличения будет уменьшаться.
> 
> В случае диффузионных моделей это проявляется до начала галлюциногирования от переизбытка итераций.

